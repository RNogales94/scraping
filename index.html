<!doctype html>
<html lang="es">
	<head>
		<meta charset="utf-8">
		<title>Pruebas de web scraping</title>
		<meta name="author" content="Luis Castro Martín">
	</head>

	<body>
		<p id="progreso">Iniciado</p>
		<p id="estado"></p>
		<p id="resultado"></p>
		<script>
			document.getElementById("progreso").innerHTML = "Lanzado el script";
			var xhr = new XMLHttpRequest();
			document.getElementById("progreso").innerHTML = "Inicializado xhr";

			xhr.onreadystatechange = function() {
				document.getElementById("estado").innerHTML = xhr.readyState;
				if (xhr.readyState == 4 ) {
					document.getElementById("progreso").innerHTML = typeof xhr.response;
					var respuesta = document.createElement("html");
					respuesta.innerHTML = xhr.response;
					document.getElementById("resultado").innerHTML = respuesta.getElementsByClassName("book-header-2-title")[0].innerText;
				}
			};
			
			document.getElementById("progreso").innerHTML = "Definida la función";
			
			xhr.open("GET", "https://www.casadellibro.com/libro-harry-potter-y-la-piedra-filosofal/9788498382662/1702767");
			document.getElementById("progreso").innerHTML = "Abierto";
			xhr.send();
			document.getElementById("progreso").innerHTML = "Enviado";
		</script>
	</body>
</html>
